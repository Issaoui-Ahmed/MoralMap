"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{1485:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var n=s(5155),r=s(2115),a=s(2926);let l=()=>{let e=localStorage.getItem("sessionId"),[t,s]=(0,r.useState)(null),[l,o]=(0,r.useState)({}),[c,i]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{fetch((0,a.hd)("/api/route-endpoints")).then(e=>e.json()).then(e=>{s(e);let t={};(e.survey||[]).forEach(e=>{t[e.name]=""}),o(t)}).catch(e=>{console.error("Failed to load survey config:",e),d("Failed to load survey questions.")})},[]);let m=(e,t)=>{o(s=>({...s,[e]:t}))},h=async()=>{d(null);try{let t=await fetch((0,a.hd)("/api/log-survey"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,responses:l})}),s=await t.text(),n=(()=>{try{return JSON.parse(s)}catch(e){return{}}})();if(!t.ok||!(null==n?void 0:n.success))throw Error((null==n?void 0:n.error)||"Submission failed");i(!0)}catch(e){d(e.message||"Could not submit survey. Please try again.")}};return c?(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:(0,n.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:"Thank you for your feedback!"})}):t?(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white p-8 shadow-lg",children:[(t.survey||[]).map(e=>(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:e.name}),"select"===e.type?(0,n.jsxs)("select",{value:l[e.name]||"",onChange:t=>m(e.name,t.target.value),className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select an option"}),(e.options||[]).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}):(0,n.jsx)("input",{type:e.type,value:l[e.name]||"",onChange:t=>m(e.name,t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-gray-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]},e.name)),(0,n.jsx)("button",{onClick:h,className:"w-full rounded-md bg-blue-600 px-4 py-2 font-semibold text-white shadow transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Submit"}),u&&(0,n.jsx)("p",{className:"mt-4 text-center text-sm text-red-600",children:u})]})}):(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:(0,n.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})})}},2926:(e,t,s)=>{s.d(t,{hd:()=>i});var n,r,a=s(5704);let l=null!=(r=null!=(n=a.env.NEXT_PUBLIC_BASE_PATH)?n:a.env.NEXT_PUBLIC_WEBFLOW_BASE_PATH)?r:"/app",o=l&&"/"!==l?"".concat(l.startsWith("/")?"":"/").concat(l.replace(/\/$/,"")):"",c=/^[a-zA-Z][a-zA-Z0-9+.-]*:/;function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return o||"";if(c.test(e))return e;let t=e.startsWith("/")?e:"/".concat(e);return o?"".concat(o).concat(t):t}}}]);